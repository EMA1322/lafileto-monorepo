<link rel="stylesheet" href="/src/styles/settings.css" />

<section
  id="settings-module"
  class="settings page container"
  data-rbac-module="settings"
  aria-labelledby="settings-title"
>
  <header class="settings__header">
    <div class="settings__heading">
      <h1 id="settings-title" class="settings__title">Configuración</h1>
      <p class="settings__subtitle">Gestioná horarios y disponibilidad del sitio.</p>
    </div>
    <div class="settings__toolbar" role="group" aria-label="Acciones de configuración">
      <button id="settings-reload" class="btn btn--ghost btn--sm" type="button">Actualizar</button>
    </div>
  </header>

  <section class="settings__content is-loading" aria-live="polite" aria-busy="true" data-status="loading">
    <div class="settings__state settings__state--loading" id="settings-loading" role="status">
      <span class="settings__spinner" aria-hidden="true"></span>
      <p>Cargando configuración…</p>
    </div>

    <div class="settings__state settings__state--error" id="settings-error" role="alert" hidden>
      <p id="settings-error-message">No pudimos cargar la configuración.</p>
      <button id="settings-retry" class="btn btn--ghost btn--sm" type="button">Reintentar</button>
    </div>

    <div class="settings__state settings__state--empty" id="settings-empty" role="status" hidden>
      <p>No hay configuración disponible para mostrar.</p>
    </div>

    <article class="settings__card" id="settings-success" hidden>
      <h2 class="settings__card-title">Hours & Availability</h2>

      <form id="settings-hours-form" class="settings__form" novalidate>
        <div id="settings-form-error" class="settings__form-error" role="alert" hidden></div>

        <fieldset class="settings__fieldset" id="settings-opening-hours">
          <legend>Opening hours</legend>
          <div id="settings-hours-grid" class="settings__hours-grid"></div>
          <p class="settings__field-error" data-error-for="hours.openingHours" hidden></p>
        </fieldset>

        <fieldset class="settings__fieldset">
          <legend>Availability override</legend>
          <label class="settings__field" for="hours-override">
            <span class="settings__label">Override</span>
            <select id="hours-override" name="hours.override" class="input"></select>
          </label>
          <p class="settings__field-error" data-error-for="hours.override" hidden></p>
        </fieldset>

        <fieldset class="settings__fieldset">
          <legend>Alert banner</legend>
          <label class="settings__field settings__field--inline" for="hours-alert-enabled">
            <input id="hours-alert-enabled" name="hours.alert.enabled" type="checkbox" />
            <span class="settings__label">Enable alert banner</span>
          </label>
          <label class="settings__field" for="hours-alert-message">
            <span class="settings__label">Message</span>
            <textarea
              id="hours-alert-message"
              name="hours.alert.message"
              class="input"
              rows="3"
              maxlength="280"
              placeholder="Ej.: Cerrado por mantenimiento"
            ></textarea>
          </label>
          <p class="settings__field-error" data-error-for="hours.alert.enabled" hidden></p>
          <p class="settings__field-error" data-error-for="hours.alert.message" hidden></p>
        </fieldset>

        <div class="settings__actions">
          <button
            id="settings-save"
            type="submit"
            class="btn btn--primary"
            data-rbac-action="write"
            data-rbac-hide
            hidden
          >
            Save
          </button>
          <p id="settings-readonly-hint" class="settings__readonly-hint" hidden>No permission to edit.</p>
        </div>
      </form>
    </article>
  </section>
</section>
