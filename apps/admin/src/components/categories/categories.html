<!-- Admin / Categories view -->
<!-- CSS del módulo cargado vía code-splitting -->
<link rel="stylesheet" href="/src/styles/categories.css" />

<section
  id="categories-view"
  class="categories"
  data-module="categories"
  aria-labelledby="categories-title"
  role="region"
>
  <header class="categories__header">
    <div class="categories__heading">
      <h2 id="categories-title" class="categories__title">Categorías</h2>
      <p class="categories__subtitle">Organizá y administrá las categorías del catálogo.</p>
    </div>

    <div class="categories__toolbar" role="group" aria-label="Búsqueda y filtros de categorías">
      <div class="categories__control categories__control--search">
        <label for="categories-search" class="sr-only">Buscar por nombre</label>
        <input
          id="categories-search"
          class="categories__search"
          type="search"
          name="search"
          placeholder="Buscar por nombre…"
          autocomplete="off"
          inputmode="search"
        />
      </div>

      <div class="categories__control">
        <label for="categories-filter-active" class="sr-only">Filtrar por estado</label>
        <select id="categories-filter-active" class="categories__select" name="filter-active">
          <option value="all" selected>Todas</option>
          <option value="active">Activas</option>
          <option value="inactive">Inactivas</option>
        </select>
      </div>

      <div class="categories__control categories__control--order">
        <label for="categories-order" class="sr-only">Ordenar por nombre</label>
        <select id="categories-order" class="categories__select" name="order">
          <option value="asc" selected>Nombre ascendente</option>
          <option value="desc">Nombre descendente</option>
        </select>
      </div>

      <div class="categories__control categories__control--actions">
        <button id="categories-refresh" class="btn btn--ghost" type="button">
          Recargar
        </button>
        <button
          id="categories-create"
          class="btn"
          type="button"
          data-action="category-create"
          data-rbac-action="write"
          data-rbac-hide
          hidden
        >
          + Nueva
        </button>
      </div>
    </div>
  </header>

  <div id="categories-status" class="categories__status" aria-live="polite"></div>

  <div class="categories__tableWrap">
    <table id="categories-table" class="categories__table" role="table">
      <caption class="sr-only">Listado de categorías</caption>
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Nombre</th>
          <th scope="col">Imagen</th>
          <th scope="col">#Productos</th>
          <th scope="col">Estado</th>
          <th scope="col" class="categories__th-actions">Acciones</th>
        </tr>
      </thead>
      <tbody id="categories-tbody" class="categories__tbody"></tbody>
    </table>
  </div>

  <p id="categories-empty" class="categories__empty" hidden>No hay categorías para mostrar.</p>

  <footer class="categories__footer" aria-label="Paginación de categorías">
    <div id="categories-summary" class="categories__summary">—</div>
    <div class="categories__pager">
      <button id="categories-page-prev" class="btn btn--ghost" type="button" aria-label="Página anterior">◀</button>
      <span id="categories-page-indicator" class="categories__page">1 / 1</span>
      <button id="categories-page-next" class="btn btn--ghost" type="button" aria-label="Página siguiente">▶</button>
    </div>
  </footer>

  <!-- Templates para modales -->
  <template id="tpl-category-form">
    <div class="categories__modal">
      <header class="categories__modalHeader">
        <h3 id="category-modal-title" class="categories__modalTitle">Nueva categoría</h3>
      </header>
      <form id="category-form" class="categories__form" novalidate>
        <fieldset class="categories__formFields">
          <legend class="sr-only">Formulario de categoría</legend>

          <div class="categories__formField">
            <label for="category-name">Nombre</label>
            <input
              id="category-name"
              name="name"
              class="form-control"
              type="text"
              required
              minlength="2"
              maxlength="80"
              autocomplete="off"
              placeholder="Ej: Pizzas"
              aria-describedby="category-name-error"
            />
            <p id="category-name-error" class="form-error" hidden>Ingresá un nombre válido (2-80 caracteres).</p>
          </div>

          <div class="categories__formField">
            <label for="category-imageUrl">Imagen (URL)</label>
            <input
              id="category-imageUrl"
              name="imageUrl"
              class="form-control"
              type="url"
              inputmode="url"
              autocomplete="off"
              placeholder="https://ejemplo.com/imagen.jpg"
              aria-describedby="category-imageUrl-hint category-imageUrl-error"
            />
            <small id="category-imageUrl-hint" class="form-hint">Opcional. Debe ser una URL accesible con https://.</small>
            <p id="category-imageUrl-error" class="form-error" hidden>Ingresá una URL válida (https://…)</p>
          </div>
        </fieldset>

        <footer class="categories__formActions">
          <button type="button" class="btn btn--outline" data-close-modal>Cancelar</button>
          <button id="category-submit" type="submit" class="btn btn--primary">Guardar</button>
        </footer>
      </form>
    </div>
  </template>

  <template id="tpl-category-delete">
    <div class="categories__modal">
      <header class="categories__modalHeader">
        <h3 id="category-delete-title" class="categories__modalTitle">Eliminar categoría</h3>
      </header>
      <div class="categories__modalBody">
        <p id="category-delete-message"></p>
      </div>
      <footer class="categories__formActions">
        <button type="button" class="btn btn--outline" data-close-modal>Cancelar</button>
        <button id="category-confirm-delete" type="button" class="btn btn--primary">Eliminar</button>
      </footer>
    </div>
  </template>
</section>
