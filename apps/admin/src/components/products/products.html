<!-- Vista del módulo Products -->
<link rel="stylesheet" href="/src/styles/products.css" />

<section
  class="products page"
  id="products-module"
  data-rbac-module="products"
  aria-labelledby="products-title"
>
  <header class="products__header">
    <div class="products__heading">
      <h1 id="products-title" class="products__title">Productos</h1>
      <p class="products__subtitle">Gestioná el catálogo, los precios y el stock disponible.</p>
    </div>
    <div class="products__header-actions">
      <button
        id="product-create"
        class="btn btn--primary"
        type="button"
        data-action="create"
        data-rbac-hide
        data-rbac-action="write"
      >
        <span aria-hidden="true">＋</span>
        <span>Crear producto</span>
      </button>
    </div>
  </header>

  <form class="products__filters" id="products-filters" novalidate>
    <div class="products__filters-group" role="group" aria-label="Buscar">
      <label class="products__label" for="filter-q">Buscar</label>
      <input
        id="filter-q"
        class="form-control form-control--dense products__input"
        type="search"
        name="q"
        placeholder="Buscar por nombre"
        inputmode="search"
        autocomplete="off"
      />
    </div>

    <div class="products__filters-group">
      <label class="products__label" for="filter-category">Categoría</label>
      <select id="filter-category" class="form-control form-control--dense products__select" name="category">
        <option value="all">Todas las categorías</option>
      </select>
    </div>

    <div class="products__filters-group">
      <label class="products__label" for="filter-status">Estado</label>
      <select id="filter-status" class="form-control form-control--dense products__select" name="status">
        <option value="all">Todos</option>
        <option value="draft">Borrador</option>
        <option value="active">Activo</option>
        <option value="archived">Archivado</option>
      </select>
    </div>

    <div class="products__filters-group">
      <label class="products__label" for="filter-order-by">Ordenar por</label>
      <select id="filter-order-by" class="form-control form-control--dense products__select" name="orderBy">
        <option value="updatedAt">Última actualización</option>
        <option value="name">Nombre</option>
        <option value="price">Precio</option>
      </select>
    </div>

    <div class="products__filters-group">
      <label class="products__label" for="filter-order-dir">Dirección</label>
      <select id="filter-order-dir" class="form-control form-control--dense products__select" name="orderDir">
        <option value="desc">Descendente</option>
        <option value="asc">Ascendente</option>
      </select>
    </div>

    <div class="products__filters-group">
      <label class="products__label" for="filter-page-size">Resultados por página</label>
      <select id="filter-page-size" class="form-control form-control--dense products__select" name="pageSize">
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="50">50</option>
      </select>
    </div>

    <div class="products__filters-group products__filters-group--actions">
      <button id="filter-clear" class="btn btn--ghost btn--sm" type="reset">Limpiar filtros</button>
    </div>
  </form>

  <section
    class="products__content is-loading"
    aria-live="polite"
    aria-busy="false"
    data-status="loading"
  >
    <div class="products__state products__state--loading" id="products-loading" role="status">
      <span class="products__spinner" aria-hidden="true"></span>
      <p>Cargando productos…</p>
    </div>

    <div class="products__state products__state--error" id="products-error" role="alert" hidden>
      <p id="products-error-message">No pudimos cargar los productos. Intentá nuevamente.</p>
      <button id="products-retry" class="btn btn--ghost btn--sm" type="button">Reintentar</button>
    </div>

    <div class="products__state products__state--empty" id="products-empty" role="status" hidden>
      <p>No encontramos productos con estos filtros.</p>
      <button id="products-empty-clear" class="btn btn--ghost btn--sm" type="button">Limpiar filtros</button>
    </div>

    <div class="table-wrapper products__table-wrapper" id="products-table-wrapper" hidden>
      <table class="data-table products__table" aria-describedby="products-meta">
        <thead>
          <tr>
            <th scope="col" class="products__cell-image">Imagen</th>
            <th scope="col">Nombre</th>
            <th scope="col" class="products__cell--numeric">Precio</th>
            <th scope="col" class="products__cell--numeric">Stock</th>
            <th scope="col">Estado</th>
            <th scope="col">Categoría</th>
            <th scope="col" class="products__cell--actions">Acciones</th>
          </tr>
        </thead>
        <tbody id="products-table-body"></tbody>
      </table>
    </div>
  </section>

  <footer class="products__footer">
    <div class="products__meta" id="products-meta" role="status" aria-live="polite">—</div>
    <nav class="products__pagination" aria-label="Paginación de productos">
      <button id="page-first" class="btn btn--ghost btn--sm" type="button" aria-label="Primera página">«</button>
      <button id="page-prev" class="btn btn--ghost btn--sm" type="button" aria-label="Página anterior">‹</button>
      <ol class="products__page-list" id="products-page-list" aria-live="polite"></ol>
      <button id="page-next" class="btn btn--ghost btn--sm" type="button" aria-label="Página siguiente">›</button>
      <button id="page-last" class="btn btn--ghost btn--sm" type="button" aria-label="Última página">»</button>
    </nav>
  </footer>
</section>
