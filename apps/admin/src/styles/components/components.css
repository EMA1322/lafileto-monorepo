/* ==========================================================================
   components.css — Librería UI (botones, formularios, tarjetas, badges, nav)
   - TODOS los colores/espacios/radios salen de tokens.
   - Sin valores mágicos de color. Solo variables.
   ========================================================================== */

@layer components {

  /* ——— Botones ——— */
  .btn {
    --btn-bg: var(--c-neutral-200);
    --btn-color: var(--c-text);
    --btn-border: var(--c-border);

    display: inline-flex; align-items: center; justify-content: center;
    gap: .5rem;
    padding: .5rem .9rem;
    border-radius: var(--radius-md);
    border: 1px solid var(--btn-border);
    background: var(--btn-bg);
    color: var(--btn-color);
    box-shadow: var(--shadow-sm);
    cursor: pointer;
    transition: background .2s ease, color .2s ease, border-color .2s ease, box-shadow .2s ease, transform .02s ease;
  }
  .btn:hover { filter: brightness(0.98); }
  .btn:active { transform: translateY(1px); }
  .btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 var(--ring-width) var(--ring-color);
  }
  .btn[disabled], .btn:disabled {
    opacity: .6; cursor: not-allowed; box-shadow: none;
  }

  .btn--primary {
    --btn-bg: var(--c-primary);
    --btn-color: var(--c-on-primary);
    --btn-border: color-mix(in srgb, var(--c-primary), #000 18%);
  }
  .btn--secondary {
    --btn-bg: var(--c-secondary);
    --btn-color: #ffffff;
    --btn-border: color-mix(in srgb, var(--c-secondary), #000 18%);
  }
  .btn--outline {
    --btn-bg: transparent;
    --btn-color: var(--c-text);
    --btn-border: var(--c-border);
    background: transparent;
  }
  .btn--ghost {
    --btn-bg: transparent;
    --btn-color: var(--c-text);
    --btn-border: color-mix(in srgb, var(--c-border) 65%, transparent);
    background: transparent;
    box-shadow: none;
  }
  .btn--ghost:hover {
    background: color-mix(in srgb, var(--c-secondary) 8%, transparent);
    --btn-border: color-mix(in srgb, var(--c-secondary) 40%, transparent);
  }
  .btn--sm {
    padding: var(--space-2) var(--space-3);
    min-height: calc(var(--space-6) + var(--space-1));
    font-size: var(--fs-h6);
    box-shadow: none;
  }
  .btn--icon {
    padding: var(--space-2);
    min-width: calc(var(--space-6) + var(--space-1));
    min-height: calc(var(--space-6) + var(--space-1));
    box-shadow: none;
  }
  .btn--icon .icon { margin: 0; }

  /* ——— Formularios ——— */
  .form-control {
    display: block; width: 100%;
    padding: .55rem .75rem;
    border: 1px solid var(--c-border);
    border-radius: var(--radius-md);
    background: var(--c-white);
    color: var(--c-text);
    box-shadow: none;
    transition: border-color .2s ease, box-shadow .2s ease;
  }
  .form-control::placeholder { color: var(--c-text-muted); }
  .form-control:focus {
    outline: none;
    border-color: var(--c-secondary);
    box-shadow: 0 0 0 var(--ring-width) var(--ring-color);
  }
  .form-control.is-invalid {
    border-color: var(--c-error);
    box-shadow: 0 0 0 var(--ring-width) rgba(220, 38, 38, .25);
  }
  .form-control.is-valid {
    border-color: var(--c-success);
    box-shadow: 0 0 0 var(--ring-width) rgba(22, 163, 74, .25);
  }
  .form-hint { color: var(--c-text-muted); font-size: .875rem; margin-top: .375rem; }
  .form-error { color: var(--c-error); font-size: .875rem; margin-top: .375rem; }
  .form-success { color: var(--c-success); font-size: .875rem; margin-top: .375rem; }

  select.form-control, textarea.form-control { min-height: 2.5rem; }

  .form-control--dense {
    padding: var(--space-2) var(--space-3);
    min-height: calc(var(--space-6) + var(--space-1));
    font-size: var(--fs-base);
  }

  /* ——— Modales ——— */
  .modal {
    position: fixed; inset: 0; z-index: 50;
    display: none; align-items: center; justify-content: center;
    background: rgba(0,0,0,.5);
    padding: var(--space-4);
  }
  .modal.is-open { display: flex; }
  .modal__dialog {
    width: 100%; max-width: 640px;
    background: var(--c-surface);
    color: var(--c-text);
    border: 1px solid var(--c-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    overflow: hidden;
  }
  .modal__header, .modal__footer { padding: var(--space-4); background: var(--c-surface-muted); }
  .modal__body { padding: var(--space-4); }
  .modal__title { font-size: var(--fs-h4); font-weight: var(--fw-semibold); }

  /* ——— Tarjetas ——— */
  .card {
    background: var(--c-surface);
    border: 1px solid var(--c-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
  }
  .card__header, .card__body, .card__footer { padding: var(--space-4); }
  .card__header { border-bottom: 1px solid var(--c-border); }
  .card__footer { border-top: 1px solid var(--c-border); }

  /* ——— Badges ——— */
  .badge {
    display: inline-block;
    padding: .25rem .5rem;
    border-radius: var(--radius-full);
    font-size: .8125rem;
    line-height: 1;
    border: 1px solid transparent;
  }
  .badge--primary   { background: color-mix(in srgb, var(--c-primary), #fff 80%); color: var(--c-text); border-color: color-mix(in srgb, var(--c-primary), #000 12%); }
  .badge--success   { background: color-mix(in srgb, var(--c-success), #fff 85%); color: var(--c-text); border-color: color-mix(in srgb, var(--c-success), #000 12%); }
  .badge--warning   { background: color-mix(in srgb, var(--c-warning), #fff 85%); color: var(--c-text); border-color: color-mix(in srgb, var(--c-warning), #000 12%); }
  .badge--error     { background: color-mix(in srgb, var(--c-error),   #fff 85%); color: var(--c-text); border-color: color-mix(in srgb, var(--c-error),   #000 12%); }
  .badge--neutral   { background: var(--c-neutral-100); color: var(--c-text); border-color: var(--c-border); }

  /* ——— Navegación / Menús ——— */
  .nav {
    display: flex; gap: var(--space-3); flex-wrap: wrap;
    list-style: none; padding: 0; margin: 0;
  }
  .nav__link {
    display: inline-flex; align-items: center; gap: .5rem;
    padding: .4rem .75rem;
    border-radius: var(--radius-md);
    color: var(--c-text);
    text-decoration: none;
  }
  .nav__link:hover { background: var(--c-neutral-100); }
  .nav__link[aria-current="page"],
  .nav__link.is-active {
    background: color-mix(in srgb, var(--c-secondary), #fff 85%);
    color: #0b172a;
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--c-secondary), #000 15%);
  }

  /* ——— Tablas ——— */
  .table-wrapper {
    width: 100%;
    overflow-x: auto;
    border: 1px solid var(--c-border);
    border-radius: var(--radius-md);
    background: var(--c-surface);
    box-shadow: var(--shadow-sm);
  }

  .data-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
  }

  .data-table thead th {
    position: sticky;
    top: 0;
    background: var(--c-surface-muted);
    color: var(--c-text-muted);
    text-align: left;
    font-weight: var(--fw-semibold);
    font-size: var(--fs-h6);
    border-bottom: 1px solid var(--c-border);
    padding: var(--space-3) var(--space-4);
    z-index: 1;
  }

  .data-table tbody td {
    padding: var(--space-3) var(--space-4);
    border-bottom: 1px solid var(--c-border);
    vertical-align: middle;
    background: var(--c-surface);
  }

  .data-table tbody tr:nth-child(odd) {
    background: color-mix(in srgb, var(--c-surface-muted) 65%, transparent);
  }

  .data-table tbody tr:hover {
    background: color-mix(in srgb, var(--c-surface-muted) 85%, transparent);
  }

  /* ——— Toasts ——— */
  .toast-stack {
    position: fixed;
    inset-block-start: var(--space-6);
    inset-inline-end: var(--space-6);
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    width: min(340px, 92vw);
    z-index: 120;
    pointer-events: none;
  }

  .toast {
    pointer-events: auto;
    display: grid;
    grid-template-columns: 1fr auto;
    gap: var(--space-3);
    align-items: start;
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-md);
    border: 1px solid var(--c-border);
    background: var(--c-surface);
    color: var(--c-text);
    box-shadow: var(--shadow-lg);
    opacity: 0;
    transform: translateX(16px);
    transition: opacity .25s ease, transform .25s ease;
  }

  .toast--visible {
    opacity: 1;
    transform: translateX(0);
  }

  .toast__message {
    margin: 0;
    font-size: var(--fs-base);
    line-height: var(--lh-base);
  }

  .toast__close {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-1);
    border: 1px solid color-mix(in srgb, var(--c-border) 70%, transparent);
    border-radius: var(--radius-sm);
    background: transparent;
    color: inherit;
    padding: var(--space-1) var(--space-2);
    font-size: var(--fs-h6);
    cursor: pointer;
    transition: background .2s ease, border-color .2s ease;
  }

  .toast__close:hover {
    background: color-mix(in srgb, var(--c-secondary) 12%, transparent);
    border-color: color-mix(in srgb, var(--c-secondary) 45%, transparent);
  }

  .toast__close:focus-visible {
    outline: none;
    box-shadow: 0 0 0 var(--ring-width) var(--ring-color);
  }

  .toast--success {
    border-color: color-mix(in srgb, var(--c-success) 30%, var(--c-border));
    background: color-mix(in srgb, var(--c-success) 10%, var(--c-surface));
    color: color-mix(in srgb, var(--c-success) 65%, var(--c-text));
  }

  .toast--error {
    border-color: color-mix(in srgb, var(--c-error) 35%, var(--c-border));
    background: color-mix(in srgb, var(--c-error) 12%, var(--c-surface));
    color: color-mix(in srgb, var(--c-error) 70%, var(--c-text));
  }

  .toast--info {
    border-color: color-mix(in srgb, var(--c-secondary) 30%, var(--c-border));
    background: color-mix(in srgb, var(--c-secondary) 10%, var(--c-surface));
    color: color-mix(in srgb, var(--c-secondary) 65%, var(--c-text));
  }

  @media (max-width: 480px) {
    .toast-stack {
      inset-inline: var(--space-3);
      width: auto;
    }
  }

  /* ——— Layout: contenedor principal ——— */
  .page {
    padding-block: var(--space-6);
    background: var(--c-bg);
  }
}
