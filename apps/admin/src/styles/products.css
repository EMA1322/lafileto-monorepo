/*
  /admin/src/styles/products.css

  Estilos del módulo Products para el panel Admin.
  - BEM con prefijo .products
  - Mobile-first: cards en mobile, tabla en desktop
  - Accesibilidad: focus visibles, tamaños de fuente legibles
*/

.products {
  display: grid;
  gap: var(--space-5);
  padding-block: var(--space-4);
  color: var(--c-text);
  background: var(--c-bg);
}

.products__header {
  display: grid;
  gap: var(--space-3);
}

.products__heading {
  display: grid;
  gap: var(--space-1);
}

.products__title {
  margin: 0;
  font-size: var(--fs-h2);
  font-weight: var(--fw-semibold);
}

.products__subtitle {
  margin: 0;
  color: var(--c-text-muted);
  font-size: var(--fs-base);
}

.products__header-actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  align-items: center;
}

.products__filters {
  display: grid;
  gap: var(--space-3);
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  padding: var(--space-4);
  border: 1px solid var(--c-border);
  border-radius: var(--radius-lg);
  background: var(--c-surface);
  box-shadow: var(--shadow-sm);
}

.products__filters-group {
  display: grid;
  gap: var(--space-2);
}

.products__filters-group--actions {
  display: flex;
  align-items: flex-end;
  justify-content: flex-end;
}

.products__label {
  font-size: var(--fs-h6);
  font-weight: var(--fw-medium);
  color: var(--c-text-muted);
}

.products__content {
  position: relative;
  display: grid;
  gap: var(--space-4);
}

.products__content [hidden] {
  display: none !important;
}

.products__content .products__state,
.products__content .products__table-wrapper {
  display: none;
}

.products__content.is-loading .products__state--loading,
.products__content[data-status='loading'] .products__state--loading {
  display: grid;
}

.products__content.has-error .products__state--error,
.products__content[data-status='error'] .products__state--error {
  display: grid;
}

.products__content.is-empty .products__state--empty,
.products__content[data-status='empty'] .products__state--empty {
  display: grid;
}

.products__content.has-success .products__table-wrapper,
.products__content[data-status='success'] .products__table-wrapper {
  display: block;
}

.products__state {
  display: grid;
  place-items: center;
  gap: var(--space-2);
  text-align: center;
  padding: var(--space-5) var(--space-4);
  border-radius: var(--radius-lg);
  border: 1px dashed var(--c-border);
  color: var(--c-text-muted);
  background: var(--c-surface);
}

.products__spinner {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 3px solid rgba(0, 0, 0, 0.08);
  border-top-color: var(--c-secondary);
  animation: products-spin 1s linear infinite;
}

@keyframes products-spin {
  to {
    transform: rotate(360deg);
  }
}

.products__table-wrapper {
  box-shadow: var(--shadow-sm);
}

.products__table {
  min-width: 720px;
}

.products__table thead th {
  font-size: var(--fs-h6);
}

.products__table tbody td {
  font-size: var(--fs-base);
}

.products__cell-image {
  width: var(--size-thumb-lg);
  min-width: var(--size-thumb-lg);
}

.products__cell-image .products__image-wrapper {
  margin-inline: auto;
}

.products__cell--numeric {
  text-align: right;
}

.products__cell--actions {
  width: 1%;
  white-space: nowrap;
}

.products__actions {
  display: inline-flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  align-items: center;
}

.products__action-btn {
  --btn-border: color-mix(in srgb, var(--c-border) 60%, transparent);
}

.products__action-btn--danger {
  --btn-bg: color-mix(in srgb, var(--c-error) 18%, var(--c-surface));
  --btn-color: var(--c-error);
  --btn-border: color-mix(in srgb, var(--c-error) 45%, var(--c-border));
}

.products__image-wrapper {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.products__image-wrapper .products__badge {
  position: absolute;
  inset: auto auto 0 0;
  transform: translate(-25%, -25%);
  z-index: 1;
}

.products__image,
.products__image--placeholder {
  width: var(--size-thumb-sm);
  height: var(--size-thumb-sm);
  border-radius: var(--radius-md);
}

.products__image {
  display: block;
  object-fit: cover;
  border: 1px solid var(--c-border);
  background: var(--c-surface);
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--c-border) 60%, transparent);
}

.products__image--placeholder {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: color-mix(in srgb, var(--c-surface-muted) 60%, transparent);
  color: var(--c-text-muted);
  font-weight: var(--fw-semibold);
  font-size: 1.05rem;
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--c-border) 55%, transparent);
}

.products__cards {
  display: grid;
  gap: var(--space-3);
}

.products__card {
  display: grid;
  gap: var(--space-3);
}

.products__card-media {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: var(--space-3);
  border-bottom: 1px solid var(--c-border);
  background: var(--c-surface-muted);
}

.products__card-media .products__image,
.products__card-media .products__image--placeholder {
  width: 100%;
  max-width: 220px;
  aspect-ratio: 4 / 3;
  height: auto;
  border-radius: var(--radius-lg);
}

.products__card-media .products__image-wrapper {
  width: 100%;
  max-width: 220px;
}

.products__badge {
  letter-spacing: 0.02em;
  text-transform: uppercase;
  font-weight: var(--fw-semibold);
}

.products__badge--offer {
  box-shadow: var(--shadow-sm);
}

.products__card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--space-2);
}

.products__card-title {
  margin: 0;
  font-size: var(--fs-h4);
  font-weight: var(--fw-semibold);
}

.products__card-meta {
  display: grid;
  gap: var(--space-2);
  margin: 0;
}

.products__card-row {
  display: flex;
  justify-content: space-between;
  gap: var(--space-2);
  font-size: var(--fs-base);
  align-items: baseline;
}

.products__card-label {
  font-weight: var(--fw-medium);
  color: var(--c-text-muted);
}

.products__status {
  font-weight: var(--fw-semibold);
}


.products__status-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 6rem;
  height: 2rem;
  padding: 0 var(--space-3);
  border: 1px solid var(--c-border);
  border-radius: 999px;
  background: var(--c-surface);
  color: var(--c-text-muted);
  font-size: var(--fs-h6);
  font-weight: var(--fw-semibold);
  cursor: pointer;
  transition: background 180ms ease, border-color 180ms ease, color 180ms ease;
}

.products__status-toggle.is-active {
  color: var(--c-success);
  border-color: color-mix(in srgb, var(--c-success) 55%, white);
  background: color-mix(in srgb, var(--c-success) 14%, white);
}

.products__status-toggle.is-inactive {
  color: var(--c-text-muted);
  border-color: color-mix(in srgb, var(--c-border) 60%, white);
  background: color-mix(in srgb, var(--c-text-muted) 8%, white);
}

.products__status-toggle:hover:not(:disabled) {
  border-color: var(--c-primary);
}

.products__status-toggle:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

.products__price-group {
  display: inline-flex;
  align-items: baseline;
  gap: var(--space-1);
  font-feature-settings: 'tnum' 1;
}

.products__price {
  display: inline-flex;
  align-items: baseline;
}

.products__price--original {
  color: var(--c-text-muted);
  text-decoration: line-through;
  font-size: var(--fs-h6);
}

.products__price--final {
  font-weight: var(--fw-semibold);
}

.products__price-separator {
  color: var(--c-text-muted);
  font-weight: var(--fw-medium);
}

.products__price-discount {
  color: var(--c-error);
  font-weight: var(--fw-semibold);
  font-size: var(--fs-h6);
}

.products__cell--numeric .products__price-group {
  justify-content: flex-end;
}

.products__card-price {
  display: inline-flex;
  width: 100%;
}

.products__card-price .products__price-group {
  justify-content: flex-start;
}

.products__footer {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.products__meta {
  font-size: var(--fs-h6);
  color: var(--c-text-muted);
}

.products__pagination {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-2);
}

.products__page-list {
  display: inline-flex;
  gap: var(--space-2);
  padding: 0;
  margin: 0;
  list-style: none;
}

.products__page-item[aria-current='page'] {
  box-shadow: 0 0 0 var(--ring-width) var(--ring-color);
}

.products__form {
  display: grid;
  gap: var(--space-4);
}

.products__form-title {
  margin: 0;
  font-size: var(--fs-h3);
  font-weight: var(--fw-semibold);
}

.products__form-grid {
  display: grid;
  gap: var(--space-3);
}

.products__field {
  display: grid;
  gap: var(--space-2);
}

.products__field label {
  font-weight: var(--fw-medium);
  color: var(--c-text);
}

.products__field input,
.products__field select,
.products__field textarea {
  font-size: var(--fs-base);
}

.products__field--error .form-control {
  border-color: var(--c-error);
  box-shadow: 0 0 0 var(--ring-width) rgba(220, 38, 38, 0.25);
}

.products__error-text {
  margin: 0;
  color: var(--c-error);
  font-size: var(--fs-h6);
}

.products__help-text {
  margin: 0;
  color: var(--c-text-muted);
  font-size: var(--fs-h6);
}

.products__image-preview {
  display: grid;
  gap: var(--space-2);
  align-items: center;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
}

.products__image-preview-placeholder,
.products__image-preview-img {
  width: 100%;
  max-width: 220px;
  border-radius: var(--radius-lg);
  border: 1px solid var(--c-border);
  background: var(--c-surface-muted);
  padding: var(--space-3);
  justify-self: start;
}

.products__image-preview-placeholder {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--c-text-muted);
  font-weight: var(--fw-semibold);
}

.products__image-preview-placeholder--static {
  max-width: 320px;
}

.products__section {
  display: grid;
  gap: var(--space-3);
  padding: var(--space-3);
  border: 1px solid var(--c-border);
  border-radius: var(--radius-lg);
  background: color-mix(in srgb, var(--c-surface) 90%, var(--c-surface-muted));
}

.products__section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
}

.products__section-title {
  margin: 0;
  font-size: var(--fs-h4);
  font-weight: var(--fw-semibold);
}

.products__switch {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  font-weight: var(--fw-medium);
  color: var(--c-text);
}

.products__switch input {
  width: 18px;
  height: 18px;
}

.products__section-body {
  display: grid;
  gap: var(--space-3);
}

.products__form-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-2);
}

.products__view-modal {
  display: grid;
  gap: var(--space-4);
  max-width: min(520px, 90vw);
}

.products__view-title {
  margin: 0;
  font-size: var(--fs-h3);
  font-weight: var(--fw-semibold);
}

.products__view-body {
  display: grid;
  gap: var(--space-3);
}

.products__view-media {
  display: grid;
  place-items: center;
  background: color-mix(in srgb, var(--c-surface) 90%, white 10%);
  border: 1px solid var(--c-border);
  border-radius: var(--radius-lg);
  padding: var(--space-3);
}

.products__view-grid {
  display: grid;
  gap: var(--space-2);
}

.products__view-row {
  display: flex;
  justify-content: space-between;
  gap: var(--space-2);
  padding-bottom: var(--space-1);
  border-bottom: 1px solid var(--c-border);
}

.products__view-row:last-child {
  border-bottom: 0;
  padding-bottom: 0;
}

.products__view-label {
  font-weight: var(--fw-medium);
  color: var(--c-text-muted);
}

.products__view-value {
  text-align: right;
}

.products__view-grid--compact {
  gap: var(--space-1);
}

.products__view-grid--compact .products__view-row {
  border-bottom: 0;
  padding: 0;
}

.products__view-description {
  display: grid;
  gap: var(--space-2);
}

.products__view-description h4 {
  margin: 0;
  font-size: var(--fs-h4);
}

.products__view-description p {
  margin: 0;
  color: var(--c-text-muted);
}

.products__view-section {
  display: grid;
  gap: var(--space-3);
}

.products__view-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
}

.products__view-tag {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-sm);
  border: 1px solid var(--c-border);
  font-size: var(--fs-h6);
  color: var(--c-text-muted);
}

.products__view-tag--active {
  border-color: color-mix(in srgb, var(--c-success) 45%, transparent);
  color: var(--c-success);
  background: color-mix(in srgb, var(--c-success) 12%, transparent);
}

.products__status-menu {
  display: grid;
  gap: var(--space-1);
  padding: var(--space-2);
  border-radius: var(--radius-lg);
  border: 1px solid var(--c-border);
  background: var(--c-surface);
  box-shadow: var(--shadow-sm);
}

.products__status-option {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: background-color 0.2s ease, border-color 0.2s ease;
}

.products__status-option:hover {
  background: color-mix(in srgb, var(--c-surface-muted) 80%, transparent);
}

.products__status-option input {
  width: 16px;
  height: 16px;
}

.products__status-option-label {
  font-weight: var(--fw-medium);
}

.products__status-option-helper {
  color: var(--c-text-muted);
  font-size: var(--fs-h6);
}

.products__status-trigger {
  position: relative;
}

.products__status-popover {
  position: absolute;
  top: calc(100% + var(--space-2));
  right: 0;
  z-index: 20;
}

@media (max-width: 768px) {
  .products {
    padding: var(--space-3);
  }

  .products__table {
    min-width: 640px;
  }
}
